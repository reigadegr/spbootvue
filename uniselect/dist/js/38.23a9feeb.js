"use strict";(self["webpackChunkuniselect"]=self["webpackChunkuniselect"]||[]).push([[38],{9038:function(e,s,t){t.r(s),t.d(s,{default:function(){return w}});var o=t(3396),l=t(7139);const r={class:"navdiv"},c=(0,o._)("h1",null,"欢迎选课",-1),u={class:"welcome"},a={id:"message"},i={key:0},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"课程ID"),(0,o._)("th",null,"课程名称"),(0,o._)("th",null,"主讲教师"),(0,o._)("th",null,"课程描述"),(0,o._)("th",null,"课程余量"),(0,o._)("th",null,"可选操作")])],-1);function h(e,s,t,h,d,g){const m=(0,o.up)("el-button"),p=(0,o.up)("el-input");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",r,[(0,o.Wm)(m,{type:"primary",onClick:g.goToWelcome},{default:(0,o.w5)((()=>[(0,o.Uk)("回到首页")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:g.goToSelectCourse},{default:(0,o.w5)((()=>[(0,o.Uk)("选课")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:g.goToAlreadySelect},{default:(0,o.w5)((()=>[(0,o.Uk)("已选")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:g.goToNowUserInfo},{default:(0,o.w5)((()=>[(0,o.Uk)("个人信息")])),_:1},8,["onClick"])]),c,(0,o._)("p",u,[(0,o.Uk)(" 您的学号："),(0,o._)("span",null,(0,l.zw)(d.globalstdid),1)]),(0,o.Wm)(m,{type:"warning",onClick:g.getCourses},{default:(0,o.w5)((()=>[(0,o.Uk)("刷新课程信息")])),_:1},8,["onClick"]),(0,o._)("div",a,(0,l.zw)(d.message),1),(0,o.Wm)(p,{modelValue:d.searchKeyword,"onUpdate:modelValue":s[0]||(s[0]=e=>d.searchKeyword=e),style:{width:"200px"},placeholder:"请输入要搜索课程名的子串"},null,8,["modelValue"]),(0,o.Wm)(m,{type:"primary",onClick:g.searchCourses},{default:(0,o.w5)((()=>[(0,o.Uk)("搜索")])),_:1},8,["onClick"]),d.courses.length>0?((0,o.wg)(),(0,o.iD)("table",i,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.courses,((e,s)=>((0,o.wg)(),(0,o.iD)("tr",{key:s},[(0,o._)("td",null,(0,l.zw)(e.id),1),(0,o._)("td",null,(0,l.zw)(e.name),1),(0,o._)("td",null,(0,l.zw)(e.teacher),1),(0,o._)("td",null,(0,l.zw)(e.description),1),(0,o._)("td",null,(0,l.zw)(e.num),1),(0,o._)("td",null,[(0,o.Wm)(m,{type:"primary",onClick:s=>g.getCourseId(e.id,e.num,d.globalstdid,e.name)},{default:(0,o.w5)((()=>[(0,o.Uk)("选课 ")])),_:2},1032,["onClick"])])])))),128))])])):(0,o.kq)("",!0)])}t(560);var d=t(1076),g={name:"selectcourse",data(){return{courses:[],message:"",globalstdid:"",searchKeyword:""}},mounted(){this.globalstdid=localStorage.getItem("globalstdid")},methods:{async modifyCourse(e){try{await d.Z.post("http://localhost:9090/uniselect/deletecourse",{id:e})}catch(s){return console.error(s),void this.$message.error("修改课程失败！")}this.$router.push("/courselayout")},async deleteCourse(e){try{await d.Z.post("http://localhost:9090/uniselect/deletecourse",{id:e})}catch(s){return console.error(s),void this.$message.error("删除课程失败！")}this.$message.success("删除课程成功！")},async searchCourses(){this.$message.info("输入的内容: "+this.searchKeyword),await d.Z.get("http://localhost:9090/uniselect/courses").then((e=>{this.courses=e.data,this.$message.success("课程列表已更新"),this.filterCourses()})).catch((e=>{console.error(e),this.$message.error("获取课程信息失败")}))},filterCourses(){if(this.searchKeyword){const e=this.courses.filter((e=>e.name.includes(this.searchKeyword)));this.courses=e}},async getCourses(){await d.Z.get("http://localhost:9090/uniselect/courses").then((e=>{this.courses=e.data,this.$message.success("课程列表已更新")})).catch((e=>{console.error(e),this.$message.error("获取课程信息失败")}))},async getCourseId(e,s,t,o){console.log("全局学生id: ",t),console.log("课程id: ",e),console.log("课程名: ",o);try{await d.Z.post("http://localhost:9090/uniselect/Course_selection_insert",{student_id:t,course_id:e,course_name:o})}catch(l){return void console.log("服务器异常")}await d.Z.get("http://localhost:9090/uniselect/courses").then((e=>{this.courses=e.data})).catch((e=>{console.error(e),this.$message.error("刷新课程信息失败")})),this.$message.success("选课成功")},goToWelcome(){this.$router.push("/welcome")},goToSelectCourse(){this.$router.push("/selectcourse")},goToAlreadySelect(){this.$router.push("/alreadyselect")},goToCourseLayout(){this.$router.push("/courselayout")},goToNowUserInfo(){this.$router.push("/nowuserinf")}}},m=t(89);const p=(0,m.Z)(g,[["render",h]]);var w=p}}]);
//# sourceMappingURL=38.23a9feeb.js.map